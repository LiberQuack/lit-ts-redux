{"version":3,"sources":["webpack:///./src/ui/components/TodoItem.ts","webpack:///./src/ui/pages/TodosPage.ts","webpack:///./src/ui/util/ModelHandlerMixin.ts","webpack:///./src/ui/util/ReduxLitElement.ts","webpack:///./src/ui/util/PageElement.ts","webpack:///./node_modules/classnames/index.js"],"names":["TodoItem_TodoItem","_super","TodoItem","_this","apply","this","arguments","inited","n","TodoItem_extends","Object","defineProperty","get","title","String","done","Boolean","prototype","_render","props","lit_element","b","templateObject_1","__makeTemplateObject","classnames_default","isNotInited","isDone","dispatchDelete","bind","connectedCallback","call","addEventListener","dispatchDone","_firstRendered","setTimeout","console","log","dispatchEvent","CustomEvent","e","target","shadowRoot","querySelector","a","customElements","define","TodosPage_TodosPage","TodosPage","todoInput","_todos","TodosPage_extends","Array","templateObject_2","TodosPage_makeTemplateObject","addTodo","set","map","todo","TodosPage_templateObject_1","toggleTodo","removeTodo","_createRoot","stateReceiver","state","data","isVisible","app","location","route","settings","routes","root","preventDefault","store","dispatch","actions","reset","ModelHandlerMixin","path","elmProperty","_safelySetPropValue","split","currentTarget","_safelyNavigate","__extends","paths","object","length","pathHead","shift","value","model","PageElement","ReduxLitElement_ReduxLitElement","ReduxLitElement","_onStoreChange","getState","__unsubscribe","subscribe","disconnectedCallback","o","d","p","c","t","setPrototypeOf","__proto__","hasOwnProperty","constructor","create","_visible","_definePropertyAccessor","classList","add","PageElement_extends","enter","leave","remove","_shouldRender","_props","_changedProps","_prevProps","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","i","arg","argType","push","isArray","key","join","module","exports"],"mappings":"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","file":"TodosPage-chunk.94c8.js","sourcesContent":["import {html, LitElement} from \"@polymer/lit-element\";\nimport classnames from \"classnames\";\n\nclass TodoItem extends LitElement {\n\n    title: string;\n    done: boolean;\n    inited = false;\n\n    static get properties() {\n        return {\n            title: String,\n            done: Boolean,\n            inited: Boolean,\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <style>\n                .item {\n                    background: #474357;\n                    padding: 10px 15px;\n                    border-radius: 3px;\n                    margin-top: 5px;\n                    display: flex;\n                    cursor: pointer;\n                    transition: .5s;\n                    opacity: 1;\n                    transform: translate(0)\n                }\n                \n                .item.isNotInited {\n                    opacity: 0;\n                    transform: translateY(-15px);\n                }\n                \n                .item--content {\n                    flex-grow: 1;\n                    flex-shrink: 1;\n                }\n                \n                .item--content.isDone {\n                    text-decoration: line-through;\n                }\n                \n                .item--menu {\n                    flex-grow: 0;\n                    flex-shrink: 0;\n                }\n                \n                .action {\n                    text-decoration: underline;\n                }\n            </style>\n            \n            <div class$=\"item ${classnames({isNotInited: !this.inited})}\">\n                <div class$=\"item--content ${classnames({isDone: this.done})}\">\n                    <slot></slot>\n                </div>\n                <div class=\"item--menu\">\n                    <span class=\"action\" on-click=\"${this.dispatchDelete.bind(this)}\">Delete</span>\n                </div>\n            </div>\n        `;\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('click', this.dispatchDone.bind(this));\n    }\n\n    _firstRendered(): void {\n        setTimeout(() => this.inited = true, 150);\n    }\n\n    protected dispatchDelete() {\n        console.log('Delete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"delete\"));\n    }\n\n    protected dispatchDone(e:Event) {\n        if (e.target === this.shadowRoot.querySelector('.action')) return;\n        console.log('Complete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"done-toggle\"));\n    }\n}\n\ncustomElements.define(\"todo-item\", TodoItem);\n\nexport {TodoItem}","import {html} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\nimport {TodosActions} from \"../../scripts/state/todos/actions\";\nimport {Todo} from \"../../scripts/common/types\";\nimport ModelHandlerMixin from \"../util/ModelHandlerMixin\";\n\nimport \"../components/TodoItem\";\nimport {PageElement} from \"../util/PageElement\";\nimport {settings} from \"../../scripts/environment/settings\";\n\nclass TodosPage extends ModelHandlerMixin(PageElement) {\n\n    todoInput = \"\";\n    _todos: Array<Todo> = [];\n\n    static get properties() {\n        return {\n            todoInput: String,\n            _todos: Array\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <section class=\"todos l-container\">\n                <form class=\"form\" on-submit=\"${this.addTodo.bind(this)}\">\n                    <input class=\"todos--input form--floatinput l-width-100\" \n                           placeholder=\"My todo is...\"\n                           on-input=\"${this.set('todoInput', 'value')}\"\n                           on-keydown=\"${this.set('todoInput', 'value')}\">\n                </form>\n                <ul class=\"todos--items\">\n                    ${this._todos.map(todo => (html`\n                        <li>\n                            <todo-item done=\"${todo.done}\"\n                                       on-done-toggle=\"${() => this.toggleTodo(todo)}\"\n                                       on-delete=\"${() => this.removeTodo(todo)}\">${todo.title}</todo-item>\n                        </li>`\n                    ))}\n                </ul>\n            </section>\n        `;\n    }\n\n    protected _createRoot() {\n        return this;\n    }\n\n    protected stateReceiver(state: RootState): void {\n        this._todos = state.todo.data;\n    }\n\n    protected isVisible(state: RootState): boolean {\n        return state.app.location.route == settings.app.routes.root;\n    }\n\n    protected addTodo(e: Event) {\n        e.preventDefault();\n        const title = this.todoInput;\n        if (!title) return console.log(\"No value to add todo\");\n        appState.dispatch(TodosActions.addTodo({title, done: false}));\n        this.querySelector(\"form\").reset();\n    }\n\n    protected removeTodo(todo: Todo) {\n        appState.dispatch(TodosActions.removeTodo(todo));\n    }\n\n    protected toggleTodo(todo: Todo) {\n        appState.dispatch(TodosActions.toggleTodo(todo));\n    }\n}\n\ncustomElements.define(\"todos-page\", TodosPage);\n\nexport {TodosPage}","//TODO: Add tests for this mixin\nexport default (baseClass) => class ModelHandlerMixin extends baseClass {\n\n    set = (function (path: string, elmProperty: string /*TODO: Could receive a callback function (also as second argument)*/) {\n        return ((e) => this._safelySetPropValue(path.split('.'), e.currentTarget[elmProperty]));\n    }).bind(this);\n\n    get = (function (path: string) {\n        return this._safelyNavigate(path.split('.'), this)\n    }).bind(this);\n\n    _safelyNavigate(paths: Array<any>, object?:Object) {\n        if (object === undefined || object === null || paths.length < 1) return object;\n        const pathHead = paths.shift();\n        return this._safelyNavigate(paths, object[pathHead])\n    }\n\n    _safelySetPropValue(paths: Array<any>, value, model?:Object) {\n        let object = model || this;\n\n        if (paths.length > 1) {\n            const pathHead = paths.shift();\n            object[pathHead] = typeof object[pathHead] === \"object\" ? object[pathHead] : {};\n            return this._safelySetPropValue(paths, value, object[pathHead])\n        } else {\n            return object[paths.shift()] = value;\n        }\n    }\n\n}\n","import {LitElement} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\n\nexport abstract class ReduxLitElement extends LitElement {\n\n    connectedCallback() {\n        super.connectedCallback();\n        this._onStoreChange(appState.getState());\n        this.__unsubscribe = appState.subscribe(() => this._onStoreChange(appState.getState()));\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.__unsubscribe();\n        super.disconnectedCallback && super.disconnectedCallback();\n    }\n\n    protected _onStoreChange(state: RootState): void {\n        this.stateReceiver(state);\n    }\n\n    abstract stateReceiver(state: RootState): void;\n\n}\n","import {ReduxLitElement} from \"./ReduxLitElement\";\nimport {RootState} from \"../../scripts/state/store\";\n\nexport abstract class PageElement extends ReduxLitElement {\n\n    constructor() {\n        super();\n        this._visible = true;\n        this._definePropertyAccessor(\"_visible\");\n        this.classList.add(\"l-page\");\n        this.classList.add(\"e-fade\");\n        this.classList.add(\"e-from-left\");\n    }\n\n    protected abstract isVisible(state: RootState): boolean;\n\n    protected enter() {\n        this.classList.add(\"isVisible\");\n    };\n\n    protected leave() {\n        this.classList.remove(\"isVisible\");\n    };\n\n    protected _onStoreChange(state: RootState): void {\n        super._onStoreChange(state);\n        const isVisible = this.isVisible(state);\n        if (isVisible) {\n            this.enter();\n        } else {\n            this.leave();\n        }\n        this._visible = isVisible;\n    }\n\n    _shouldRender(_props: object, _changedProps: object, _prevProps: object): boolean {\n        return this._visible;\n    }\n}\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}