{"version":3,"sources":["webpack:///./src/ui/components/TodoItem.ts","webpack:///./src/ui/pages/TodosPage.ts","webpack:///./src/ui/util/ModelHandlerMixin.ts","webpack:///./src/ui/util/ReduxLitElement.ts","webpack:///./src/ui/util/PageElement.ts","webpack:///./node_modules/classnames/index.js"],"names":["TodoItem_TodoItem","_super","TodoItem","_this","apply","this","arguments","inited","n","TodoItem_extends","Object","defineProperty","get","title","String","done","Boolean","prototype","_render","props","lit_element","b","templateObject_1","__makeTemplateObject","classnames_default","isNotInited","dispatchDone","bind","isDone","dispatchDelete","_firstRendered","setTimeout","console","log","dispatchEvent","CustomEvent","e","target","shadowRoot","querySelector","a","customElements","define","TodosPage_TodosPage","TodosPage","todoInput","_todos","TodosPage_extends","Array","templateObject_2","TodosPage_makeTemplateObject","addTodo","set","map","todo","TodosPage_templateObject_1","toggleTodo","removeTodo","_createRoot","stateReceiver","state","data","isVisible","app","location","route","settings","routes","root","preventDefault","store","dispatch","actions","reset","ModelHandlerMixin","path","elmProperty","_safelySetPropValue","split","currentTarget","_safelyNavigate","__extends","paths","object","length","pathHead","shift","value","model","PageElement","ReduxLitElement_ReduxLitElement","ReduxLitElement","connectedCallback","call","_onStoreChange","getState","__unsubscribe","subscribe","disconnectedCallback","o","d","p","c","t","setPrototypeOf","__proto__","hasOwnProperty","constructor","create","_visible","_definePropertyAccessor","classList","add","PageElement_extends","enter","leave","remove","_shouldRender","_props","_changedProps","_prevProps","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","i","arg","argType","push","isArray","key","join","module","exports"],"mappings":"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","file":"TodosPage-chunk.5f82.js","sourcesContent":["import {html, LitElement} from \"@polymer/lit-element\";\nimport classnames from \"classnames\";\n\nclass TodoItem extends LitElement {\n\n    title: string;\n    done: boolean;\n    inited = false;\n\n    static get properties() {\n        return {\n            title: String,\n            done: Boolean,\n            inited: Boolean,\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <style>\n                .item {\n                    background: #474357;\n                    padding: 10px 15px;\n                    border-radius: 3px;\n                    margin-top: 5px;\n                    display: flex;\n                    cursor: pointer;\n                    transition: .5s;\n                    opacity: 1;\n                    transform: translate(0)\n                }\n                \n                .item.isNotInited {\n                    opacity: 0;\n                    transform: translateY(-15px);\n                }\n                \n                .item--content {\n                    flex-grow: 1;\n                    flex-shrink: 1;\n                }\n                \n                .item--content.isDone {\n                    text-decoration: line-through;\n                }\n                \n                .item--menu {\n                    flex-grow: 0;\n                    flex-shrink: 0;\n                }\n                \n                .action {\n                    text-decoration: underline;\n                }\n            </style>\n            \n            <div class$=\"item ${classnames({isNotInited: !this.inited})}\" on-click=\"${this.dispatchDone.bind(this)}\">\n                <div class$=\"item--content ${classnames({isDone: this.done})}\">\n                    <slot></slot>\n                </div>\n                <div class=\"item--menu\">\n                    <span class=\"action\" on-click=\"${this.dispatchDelete.bind(this)}\">Delete</span>\n                </div>\n            </div>\n        `;\n    }\n\n    _firstRendered(): void {\n        setTimeout(() => this.inited = true, 150);\n    }\n\n    protected dispatchDelete() {\n        console.log('Delete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"delete\"));\n    }\n\n    protected dispatchDone(e:Event) {\n        if (e.target === this.shadowRoot.querySelector('.action')) return;\n        console.log('Complete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"done-toggle\"));\n    }\n}\n\ncustomElements.define(\"todo-item\", TodoItem);\n\nexport {TodoItem}","import {html} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\nimport {TodosActions} from \"../../scripts/state/todos/actions\";\nimport {Todo} from \"../../scripts/common/types\";\nimport ModelHandlerMixin from \"../util/ModelHandlerMixin\";\n\nimport \"../components/TodoItem\";\nimport {PageElement} from \"../util/PageElement\";\nimport {settings} from \"../../scripts/environment/settings\";\n\nclass TodosPage extends ModelHandlerMixin(PageElement) {\n\n    todoInput = \"\";\n    _todos: Array<Todo> = [];\n\n    static get properties() {\n        return {\n            todoInput: String,\n            _todos: Array\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <section class=\"todos l-container\">\n                <form class=\"form\" on-submit=\"${this.addTodo.bind(this)}\">\n                    <input class=\"todos--input form--floatinput l-width-100\" \n                           placeholder=\"My todo is...\"\n                           on-input=\"${this.set('todoInput', 'value')}\"\n                           on-keydown=\"${this.set('todoInput', 'value')}\">\n                </form>\n                <ul class=\"todos--items\">\n                    ${this._todos.map(todo => (html`\n                        <li>\n                            <todo-item done=\"${todo.done}\"\n                                       on-done-toggle=\"${() => this.toggleTodo(todo)}\"\n                                       on-delete=\"${() => this.removeTodo(todo)}\">${todo.title}</todo-item>\n                        </li>`\n                    ))}\n                </ul>\n            </section>\n        `;\n    }\n\n    protected _createRoot() {\n        return this;\n    }\n\n    protected stateReceiver(state: RootState): void {\n        this._todos = state.todo.data;\n    }\n\n    protected isVisible(state: RootState): boolean {\n        return state.app.location.route == settings.app.routes.root;\n    }\n\n    protected addTodo(e: Event) {\n        e.preventDefault();\n        const title = this.todoInput;\n        if (!title) return console.log(\"No value to add todo\");\n        appState.dispatch(TodosActions.addTodo({title, done: false}));\n        this.querySelector(\"form\").reset();\n    }\n\n    protected removeTodo(todo: Todo) {\n        appState.dispatch(TodosActions.removeTodo(todo));\n    }\n\n    protected toggleTodo(todo: Todo) {\n        appState.dispatch(TodosActions.toggleTodo(todo));\n    }\n}\n\ncustomElements.define(\"todos-page\", TodosPage);\n\nexport {TodosPage}","//TODO: Add tests for this mixin\nexport default (baseClass) => class ModelHandlerMixin extends baseClass {\n\n    set = (function (path: string, elmProperty: string /*TODO: Could receive a callback function (also as second argument)*/) {\n        return ((e) => this._safelySetPropValue(path.split('.'), e.currentTarget[elmProperty]));\n    }).bind(this);\n\n    get = (function (path: string) {\n        return this._safelyNavigate(path.split('.'), this)\n    }).bind(this);\n\n    _safelyNavigate(paths: Array<any>, object?:Object) {\n        if (object === undefined || object === null || paths.length < 1) return object;\n        const pathHead = paths.shift();\n        return this._safelyNavigate(paths, object[pathHead])\n    }\n\n    _safelySetPropValue(paths: Array<any>, value, model?:Object) {\n        let object = model || this;\n\n        if (paths.length > 1) {\n            const pathHead = paths.shift();\n            object[pathHead] = typeof object[pathHead] === \"object\" ? object[pathHead] : {};\n            return this._safelySetPropValue(paths, value, object[pathHead])\n        } else {\n            return object[paths.shift()] = value;\n        }\n    }\n\n}\n","import {LitElement} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\n\nexport abstract class ReduxLitElement extends LitElement {\n\n    connectedCallback() {\n        super.connectedCallback();\n        this._onStoreChange(appState.getState());\n        this.__unsubscribe = appState.subscribe(() => this._onStoreChange(appState.getState()));\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.__unsubscribe();\n        super.disconnectedCallback && super.disconnectedCallback();\n    }\n\n    protected _onStoreChange(state: RootState): void {\n        this.stateReceiver(state);\n    }\n\n    abstract stateReceiver(state: RootState): void;\n\n}\n","import {ReduxLitElement} from \"./ReduxLitElement\";\nimport {RootState} from \"../../scripts/state/store\";\n\nexport abstract class PageElement extends ReduxLitElement {\n\n    constructor() {\n        super();\n        this._visible = true;\n        this._definePropertyAccessor(\"_visible\");\n        this.classList.add(\"l-page\");\n        this.classList.add(\"e-fade\");\n        this.classList.add(\"e-from-left\");\n    }\n\n    protected abstract isVisible(state: RootState): boolean;\n\n    protected enter() {\n        this.classList.add(\"isVisible\");\n    };\n\n    protected leave() {\n        this.classList.remove(\"isVisible\");\n    };\n\n    protected _onStoreChange(state: RootState): void {\n        super._onStoreChange(state);\n        const isVisible = this.isVisible(state);\n        if (isVisible) {\n            this.enter();\n        } else {\n            this.leave();\n        }\n        this._visible = isVisible;\n    }\n\n    _shouldRender(_props: object, _changedProps: object, _prevProps: object): boolean {\n        return this._visible;\n    }\n}\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}