{"version":3,"sources":["webpack:///./src/ui/components/TodoItem.ts","webpack:///./src/ui/pages/TodosPage.ts","webpack:///./src/ui/util/ModelHandlerMixin.ts","webpack:///./src/ui/util/PageElement.ts","webpack:///./node_modules/classnames/index.js"],"names":["TodoItem_TodoItem","_super","TodoItem","_this","apply","this","arguments","inited","n","TodoItem_extends","Object","defineProperty","get","title","String","done","Boolean","prototype","_render","props","lit_element","b","templateObject_1","__makeTemplateObject","classnames_default","isNotInited","dispatchDone","bind","isDone","dispatchDelete","connectedCallback","call","_firstRendered","setTimeout","console","log","dispatchEvent","CustomEvent","e","target","shadowRoot","querySelector","a","customElements","define","TodosPage_TodosPage","TodosPage","todoInput","_todos","TodosPage_extends","Array","templateObject_2","TodosPage_makeTemplateObject","addTodo","set","map","todo","TodosPage_templateObject_1","toggleTodo","removeTodo","_createRoot","stateReceiver","state","data","isVisible","app","location","route","settings","routes","root","preventDefault","store","dispatch","actions","reset","ModelHandlerMixin","path","elmProperty","_safelySetPropValue","split","currentTarget","_safelyNavigate","__extends","paths","object","length","pathHead","shift","value","model","PageElement","_visible","_definePropertyAccessor","classList","add","enter","leave","remove","_onStoreChange","_shouldRender","_props","_changedProps","_prevProps","_ReduxLitElement__WEBPACK_IMPORTED_MODULE_0__","92","t","o","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","hasOwnProperty","classNames","classes","i","arg","argType","push","isArray","key","join","module","exports"],"mappings":"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","file":"TodosPage-chunk.ec10.js","sourcesContent":["import {html, LitElement} from \"@polymer/lit-element\";\nimport classnames from \"classnames\";\n\nclass TodoItem extends LitElement {\n\n    title: string;\n    done: boolean;\n    inited = false;\n\n    static get properties() {\n        return {\n            title: String,\n            done: Boolean,\n            inited: Boolean,\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <style>\n                .item {\n                    background: #474357;\n                    padding: 10px 15px;\n                    border-radius: 3px;\n                    margin-top: 5px;\n                    display: flex;\n                    cursor: pointer;\n                    transition: .5s;\n                    opacity: 1;\n                    transform: translate(0)\n                }\n                \n                .item.isNotInited {\n                    opacity: 0;\n                    transform: translateY(-15px);\n                }\n                \n                .item--content {\n                    flex-grow: 1;\n                    flex-shrink: 1;\n                }\n                \n                .item--content.isDone {\n                    text-decoration: line-through;\n                }\n                \n                .item--menu {\n                    flex-grow: 0;\n                    flex-shrink: 0;\n                }\n                \n                .action {\n                    text-decoration: underline;\n                }\n            </style>\n            \n            <div class$=\"item ${classnames({isNotInited: !this.inited})}\" on-click=\"${this.dispatchDone.bind(this)}\">\n                <div class$=\"item--content ${classnames({isDone: this.done})}\">\n                    <slot></slot>\n                </div>\n                <div class=\"item--menu\">\n                    <span class=\"action\" on-click=\"${this.dispatchDelete.bind(this)}\">Delete</span>\n                </div>\n            </div>\n        `;\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n    }\n\n    _firstRendered(): void {\n        setTimeout(() => this.inited = true, 150);\n    }\n\n    protected dispatchDelete() {\n        console.log('Delete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"delete\"));\n    }\n\n    protected dispatchDone(e:Event) {\n        if (e.target === this.shadowRoot.querySelector('.action')) return;\n        console.log('Complete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"done-toggle\"));\n    }\n}\n\ncustomElements.define(\"todo-item\", TodoItem);\n\nexport {TodoItem}","import {html} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\nimport {TodosActions} from \"../../scripts/state/todos/actions\";\nimport {Todo} from \"../../scripts/common/types\";\nimport ModelHandlerMixin from \"../util/ModelHandlerMixin\";\n\nimport \"../components/TodoItem\";\nimport {PageElement} from \"../util/PageElement\";\nimport {settings} from \"../../scripts/environment/settings\";\n\nclass TodosPage extends ModelHandlerMixin(PageElement) {\n\n    todoInput = \"\";\n    _todos: Array<Todo> = [];\n\n    static get properties() {\n        return {\n            todoInput: String,\n            _todos: Array\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <section class=\"todos l-container\">\n                <form class=\"form\" on-submit=\"${this.addTodo.bind(this)}\">\n                    <input class=\"todos--input form--floatinput l-width-100\" \n                           placeholder=\"My todo is...\"\n                           aria-label=\"Todo input text field\"\n                           on-input=\"${this.set('todoInput', 'value')}\"\n                           on-keydown=\"${this.set('todoInput', 'value')}\">\n                </form>\n                <ul class=\"todos--items\">\n                    ${this._todos.map(todo => (html`\n                        <li>\n                            <todo-item done=\"${todo.done}\"\n                                       on-done-toggle=\"${() => this.toggleTodo(todo)}\"\n                                       on-delete=\"${() => this.removeTodo(todo)}\">${todo.title}</todo-item>\n                        </li>`\n                    ))}\n                </ul>\n            </section>\n        `;\n    }\n\n    protected _createRoot() {\n        return this;\n    }\n\n    protected stateReceiver(state: RootState): void {\n        this._todos = state.todo.data;\n    }\n\n    protected isVisible(state: RootState): boolean {\n        return state.app.location.route == settings.app.routes.root;\n    }\n\n    protected addTodo(e: Event) {\n        e.preventDefault();\n        const title = this.todoInput;\n        if (!title) return console.log(\"No value to add todo\");\n        appState.dispatch(TodosActions.addTodo({title, done: false}));\n        this.querySelector(\"form\").reset();\n    }\n\n    protected removeTodo(todo: Todo) {\n        appState.dispatch(TodosActions.removeTodo(todo));\n    }\n\n    protected toggleTodo(todo: Todo) {\n        appState.dispatch(TodosActions.toggleTodo(todo));\n    }\n}\n\ncustomElements.define(\"todos-page\", TodosPage);\n\nexport {TodosPage}","//TODO: Add tests for this mixin\nexport default (baseClass) => class ModelHandlerMixin extends baseClass {\n\n    set = (function (path: string, elmProperty: string /*TODO: Could receive a callback function (also as second argument)*/) {\n        return ((e) => this._safelySetPropValue(path.split('.'), e.currentTarget[elmProperty]));\n    }).bind(this);\n\n    get = (function (path: string) {\n        return this._safelyNavigate(path.split('.'), this)\n    }).bind(this);\n\n    _safelyNavigate(paths: Array<any>, object?:Object) {\n        if (object === undefined || object === null || paths.length < 1) return object;\n        const pathHead = paths.shift();\n        return this._safelyNavigate(paths, object[pathHead])\n    }\n\n    _safelySetPropValue(paths: Array<any>, value, model?:Object) {\n        let object = model || this;\n\n        if (paths.length > 1) {\n            const pathHead = paths.shift();\n            object[pathHead] = typeof object[pathHead] === \"object\" ? object[pathHead] : {};\n            return this._safelySetPropValue(paths, value, object[pathHead])\n        } else {\n            return object[paths.shift()] = value;\n        }\n    }\n\n}\n","import {ReduxLitElement} from \"./ReduxLitElement\";\nimport {RootState} from \"../../scripts/state/store\";\n\nexport abstract class PageElement extends ReduxLitElement {\n\n    constructor() {\n        super();\n        this._visible = true;\n        this._definePropertyAccessor(\"_visible\");\n        this.classList.add(\"l-page\");\n        this.classList.add(\"e-fade\");\n        this.classList.add(\"e-from-left\");\n    }\n\n    protected abstract isVisible(state: RootState): boolean;\n\n    protected enter() {\n        this.classList.add(\"isVisible\");\n    };\n\n    protected leave() {\n        this.classList.remove(\"isVisible\");\n    };\n\n    protected _onStoreChange(state: RootState): void {\n        super._onStoreChange(state);\n        const isVisible = this.isVisible(state);\n        if (isVisible) {\n            this.enter();\n        } else {\n            this.leave();\n        }\n        this._visible = isVisible;\n    }\n\n    _shouldRender(_props: object, _changedProps: object, _prevProps: object): boolean {\n        return this._visible;\n    }\n}\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}