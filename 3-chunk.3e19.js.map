{"version":3,"sources":["webpack:///./src/ui/util/ReduxLitElement.ts","webpack:///./src/ui/util/PageElement.ts","webpack:///./node_modules/classnames/index.js","webpack:///./src/ui/components/TodoItem.ts","webpack:///./src/ui/pages/TodosPage.ts","webpack:///./src/ui/util/ModelHandlerMixin.ts"],"names":["ReduxLitElement_ReduxLitElement","_super","ReduxLitElement","__extends","prototype","connectedCallback","_this","this","call","_onStoreChange","store","a","getState","__unsubscribe","subscribe","disconnectedCallback","state","stateReceiver","lit_element","o","d","n","p","c","t","Object","setPrototypeOf","__proto__","Array","hasOwnProperty","e","constructor","create","PageElement","_visible","_definePropertyAccessor","classList","add","PageElement_extends","enter","leave","remove","isVisible","_shouldRender","_props","_changedProps","_prevProps","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classNames","classes","i","arguments","length","arg","argType","push","isArray","apply","key","join","module","exports","138","r","s","u","l","TodoItem_TodoItem","TodoItem","inited","TodoItem_extends","defineProperty","get","title","String","done","Boolean","_render","props","b","templateObject_1","value","raw","__makeTemplateObject","classnames_default","isNotInited","dispatchDone","bind","isDone","dispatchDelete","_firstRendered","setTimeout","console","log","dispatchEvent","CustomEvent","target","shadowRoot","querySelector","customElements","define","TodosPage_TodosPage","TodosPage","todoInput","_todos","TodosPage_extends","templateObject_2","TodosPage_makeTemplateObject","addTodo","set","map","todo","TodosPage_templateObject_1","toggleTodo","removeTodo","_createRoot","data","app","location","route","settings","routes","root","preventDefault","dispatch","actions","reset","ModelHandlerMixin","path","elmProperty","_safelySetPropValue","split","currentTarget","_safelyNavigate","paths","object","pathHead","shift","model"],"mappings":"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","file":"3-chunk.3e19.js","sourcesContent":["import {LitElement} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\n\nexport abstract class ReduxLitElement extends LitElement {\n\n    connectedCallback() {\n        super.connectedCallback();\n        this._onStoreChange(appState.getState());\n        this.__unsubscribe = appState.subscribe(() => this._onStoreChange(appState.getState()));\n    }\n\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.__unsubscribe();\n        super.disconnectedCallback && super.disconnectedCallback();\n    }\n\n    protected _onStoreChange(state: RootState): void {\n        this.stateReceiver(state);\n    }\n\n    abstract stateReceiver(state: RootState): void;\n\n}\n","import {ReduxLitElement} from \"./ReduxLitElement\";\nimport {RootState} from \"../../scripts/state/store\";\n\nexport abstract class PageElement extends ReduxLitElement {\n\n    constructor() {\n        super();\n        this._visible = true;\n        this._definePropertyAccessor(\"_visible\");\n        this.classList.add(\"l-page\");\n        this.classList.add(\"e-fade\");\n        this.classList.add(\"e-from-left\");\n    }\n\n    protected abstract isVisible(state: RootState): boolean;\n\n    protected enter() {\n        this.classList.add(\"isVisible\");\n    };\n\n    protected leave() {\n        this.classList.remove(\"isVisible\");\n    };\n\n    protected _onStoreChange(state: RootState): void {\n        super._onStoreChange(state);\n        const isVisible = this.isVisible(state);\n        if (isVisible) {\n            this.enter();\n        } else {\n            this.leave();\n        }\n        this._visible = isVisible;\n    }\n\n    _shouldRender(_props: object, _changedProps: object, _prevProps: object): boolean {\n        return this._visible;\n    }\n}\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import {html, LitElement} from \"@polymer/lit-element\";\nimport classnames from \"classnames\";\n\nclass TodoItem extends LitElement {\n\n    title: string;\n    done: boolean;\n    inited = false;\n\n    static get properties() {\n        return {\n            title: String,\n            done: Boolean,\n            inited: Boolean,\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <style>\n                .item {\n                    background: #474357;\n                    padding: 10px 15px;\n                    border-radius: 3px;\n                    margin-top: 5px;\n                    display: flex;\n                    cursor: pointer;\n                    transition: .5s;\n                    opacity: 1;\n                    transform: translate(0)\n                }\n                \n                .item.isNotInited {\n                    opacity: 0;\n                    transform: translateY(-15px);\n                }\n                \n                .item--content {\n                    flex-grow: 1;\n                    flex-shrink: 1;\n                }\n                \n                .item--content.isDone {\n                    text-decoration: line-through;\n                }\n                \n                .item--menu {\n                    flex-grow: 0;\n                    flex-shrink: 0;\n                }\n                \n                .action {\n                    text-decoration: underline;\n                }\n            </style>\n            \n            <div class$=\"item ${classnames({isNotInited: !this.inited})}\" on-click=\"${this.dispatchDone.bind(this)}\">\n                <div class$=\"item--content ${classnames({isDone: this.done})}\">\n                    <slot></slot>\n                </div>\n                <div class=\"item--menu\">\n                    <span class=\"action\" on-click=\"${this.dispatchDelete.bind(this)}\">Delete</span>\n                </div>\n            </div>\n        `;\n    }\n\n    _firstRendered(): void {\n        setTimeout(() => this.inited = true, 150);\n    }\n\n    protected dispatchDelete() {\n        console.log('Delete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"delete\"));\n    }\n\n    protected dispatchDone(e:Event) {\n        if (e.target === this.shadowRoot.querySelector('.action')) return;\n        console.log('Complete todo', this.title);\n        this.dispatchEvent(new CustomEvent(\"done-toggle\"));\n    }\n}\n\ncustomElements.define(\"todo-item\", TodoItem);\n\nexport {TodoItem}","import {html} from \"@polymer/lit-element\";\nimport {appState, RootState} from \"../../scripts/state/store\";\nimport {TodosActions} from \"../../scripts/state/todos/actions\";\nimport {Todo} from \"../../scripts/common/types\";\nimport ModelHandlerMixin from \"../util/ModelHandlerMixin\";\n\nimport \"../components/TodoItem\";\nimport {PageElement} from \"../util/PageElement\";\nimport {settings} from \"../../scripts/environment/settings\";\n\nclass TodosPage extends ModelHandlerMixin(PageElement) {\n\n    todoInput = \"\";\n    _todos: Array<Todo> = [];\n\n    static get properties() {\n        return {\n            todoInput: String,\n            _todos: Array\n        }\n    }\n\n    _render(props) {\n        //language=HTML\n        return html`\n            <section class=\"todos l-container\">\n                <form class=\"form\" on-submit=\"${this.addTodo.bind(this)}\">\n                    <input class=\"todos--input form--floatinput l-width-100\" \n                           placeholder=\"My todo is...\"\n                           on-input=\"${this.set('todoInput', 'value')}\"\n                           on-keydown=\"${this.set('todoInput', 'value')}\">\n                </form>\n                <ul class=\"todos--items\">\n                    ${this._todos.map(todo => (html`\n                        <li>\n                            <todo-item done=\"${todo.done}\"\n                                       on-done-toggle=\"${() => this.toggleTodo(todo)}\"\n                                       on-delete=\"${() => this.removeTodo(todo)}\">${todo.title}</todo-item>\n                        </li>`\n                    ))}\n                </ul>\n            </section>\n        `;\n    }\n\n    protected _createRoot() {\n        return this;\n    }\n\n    protected stateReceiver(state: RootState): void {\n        this._todos = state.todo.data;\n    }\n\n    protected isVisible(state: RootState): boolean {\n        return state.app.location.route == settings.app.routes.root;\n    }\n\n    protected addTodo(e: Event) {\n        e.preventDefault();\n        const title = this.todoInput;\n        if (!title) return console.log(\"No value to add todo\");\n        appState.dispatch(TodosActions.addTodo({title, done: false}));\n        this.querySelector(\"form\").reset();\n    }\n\n    protected removeTodo(todo: Todo) {\n        appState.dispatch(TodosActions.removeTodo(todo));\n    }\n\n    protected toggleTodo(todo: Todo) {\n        appState.dispatch(TodosActions.toggleTodo(todo));\n    }\n}\n\ncustomElements.define(\"todos-page\", TodosPage);\n\nexport {TodosPage}","//TODO: Add tests for this mixin\nexport default (baseClass) => class ModelHandlerMixin extends baseClass {\n\n    set = (function (path: string, elmProperty: string /*TODO: Could receive a callback function (also as second argument)*/) {\n        return ((e) => this._safelySetPropValue(path.split('.'), e.currentTarget[elmProperty]));\n    }).bind(this);\n\n    get = (function (path: string) {\n        return this._safelyNavigate(path.split('.'), this)\n    }).bind(this);\n\n    _safelyNavigate(paths: Array<any>, object?:Object) {\n        if (object === undefined || object === null || paths.length < 1) return object;\n        const pathHead = paths.shift();\n        return this._safelyNavigate(paths, object[pathHead])\n    }\n\n    _safelySetPropValue(paths: Array<any>, value, model?:Object) {\n        let object = model || this;\n\n        if (paths.length > 1) {\n            const pathHead = paths.shift();\n            object[pathHead] = typeof object[pathHead] === \"object\" ? object[pathHead] : {};\n            return this._safelySetPropValue(paths, value, object[pathHead])\n        } else {\n            return object[paths.shift()] = value;\n        }\n    }\n\n}\n"],"sourceRoot":""}